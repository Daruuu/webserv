# Configuration to test HEAD and GET methods
# Usage: ./webserver config/head_test.conf
# Then:  curl -I http://localhost:8082/            (HEAD)
#        curl    http://localhost:8082/            (GET)
#        curl -I http://localhost:8082/plain.txt   (HEAD on plain text)
#        curl    http://localhost:8082/plain.txt   (GET  on plain text)
#        curl -I http://localhost:8082/img/        (HEAD on autoindex)
#        curl    http://localhost:8082/img/        (GET  on autoindex)

server {
    listen 8082:127.0.0.1;
    server_name head_test;

    client_max_body_size 1048576;

    error_page 404 /404.html;

    # Root location â€” serves index.html via GET and HEAD
    location / {
        root ./www/head_test;
        index index.html;
        allow_methods GET;
    }

    # Plain text file location
    location /plain.txt {
        root ./www/head_test;
        allow_methods GET;
    }

    # Autoindex directory
    location /img {
        root ./www/head_test/img;
        autoindex on;
        allow_methods GET;
    }
}
