server {
    listen 8080;
    server_name localhost;

    # Root location - GET only
    location / {
        root /var/www/html;
        index index.html;
        limit_except GET {
            deny all;
        }
        client_max_body_size 1000000;
    }

    # Handle .bla files with CGI via POST only
    location ~ \.bla$ {
        root /var/www/html;
        limit_except POST {
            deny all;
        }
        client_max_body_size 1000000;
        cgi_ext .bla;
        cgi_path /cgi_test;

        # If CGI fails, show error
        error_page 500 /cgi_error.html;
    }

    # POST endpoint with max body of 100
    location /post_body {
        root /var/www/html;
        limit_except POST {
            deny all;
        }
        client_max_body_size 100;

        # Return OK for any POST with body <= 100
        return 200 "OK\n";
    }

    # Directory with YoupiBanane - GET only
    location /directory/ {
        alias /path/to/YoupiBanane/;  # Use alias to map /directory/ to YoupiBanane/
        limit_except GET {
            deny all;
        }
        client_max_body_size 1000000;
        autoindex on;

        # Default file when directory is accessed
        index youpi.bad_extension;

        # Try files in order
        try_files $uri $uri/ youpi.bad_extension =404;
    }
}
