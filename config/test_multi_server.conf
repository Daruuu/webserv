# Configuración de prueba con 2 servidores y múltiples endpoints
# Servidor 1: Puerto 8080 - Servidor principal con varios endpoints

server {
    listen 127.0.0.1:8080;
    server_name webserv_main;

    # Tamaño máximo del body del cliente (en bytes: 10MB = 10485760)
    client_max_body_size 10M;

    # Páginas de error personalizadas
    error_page 404 ./www/error_pages/404.html;
    error_page 500 ./www/error_pages/50x.html;

    # Endpoint raíz - sirve index.html
    location / {
        root ./www;
        index index.html;
        methods GET POST;
    }

    # Endpoint para la página about
    location /about {
        root ./www;
        index about.html;
        methods GET;
    }

    # Endpoint con autoindex habilitado (listado de directorio)
    location /images {
        root ./www;
        autoindex on;
        methods GET;
    }

    # Endpoint para subir archivos
    location /upload {
        root ./www;
        upload_store ./www/uploads;
        methods GET POST;
    }

    # Endpoint para pruebas de métodos DELETE
    location /delete-test {
        root ./www;
        methods GET POST DELETE;
    }
}

# Servidor 2: Puerto 8081 - Servidor secundario simple

server {
    listen 127.0.0.1:8081;
    server_name webserv_secondary;

    # Tamaño máximo: 5MB = 5242880 bytes
    client_max_body_size 5M;

    # Endpoint raíz simple
    location / {
        root ./www;
        index index.html;
        methods GET;
    }

    # Endpoint con YoupiBanane para pruebas
    location /youpi {
        root ./YoupiBanane;
        autoindex on;
        methods GET POST DELETE;
    }

    # Endpoint estático simple
    location /static {
        root ./www;
        autoindex on;
        methods GET;
    }
}
